process {
    executor = 'slurm'
    cpus = 5
<<<<<<< HEAD
    memory = 1.GB
=======
    memory = 10.GB
>>>>>>> iss-nf-emptyBarcodes
    time = 10.min
    maxRetries    = 1

    withLabel: 'infinitesimal' {
        cpus = 1
        memory = 200.MB
        time = 3.min
    }

    withLabel: 'tiler' {
        cpus = {10* task.attempt }
        memory = {64.GB* task.attempt }
        time = {25.min* task.attempt }
    }

    withLabel: 'minimal' {
        cpus = {1 * task.attempt }
        memory = {400.MB * task.attempt }
        time = {3.min * task.attempt }
    }

    withLabel: 'singleImage' {
        cpus = {1 * task.attempt }
        memory = {16.GB * task.attempt }
        time = {5.min * task.attempt }
    }

    withLabel: 'learn_registration' {
        cpus = {10  * task.attempt }
        memory = {32.GB * task.attempt }
        time = {10.min * task.attempt }
        //errorStrategy = { task.exitStatus in ((130..145) + 104) ? 'retry' : 'finish' }
    
    }
    
    withLabel: 'apply_registration' {
        cpus = {30  * task.attempt }
        memory = {32.GB * task.attempt }
        time = {30.min * task.attempt }
        //errorStrategy = { task.exitStatus in ((130..145) + 104) ? 'retry' : 'finish' }
    
    }

    withLabel: 'concat' {
        cpus = {10  * task.attempt }
        memory = {16.GB * task.attempt }
        time = {5.min * task.attempt }
        //errorStrategy = { task.exitStatus in ((130..145) + 104) ? 'retry' : 'finish' }
    
    }

    withLabel: 'small' {
        cpus = {5 * task.attempt }
        memory = {16.GB * task.attempt }
        time = {5.min * task.attempt }
    }

    withLabel: 'decoding_starfish' {
        cpus = {20  * task.attempt }
        memory = {32.GB * task.attempt }
        time = {30.min * task.attempt }
    }

    withLabel: 'decoding_postcode' {
        cpus = {20  * task.attempt }
        memory = {64.GB * task.attempt }
        time = {20.min * task.attempt }
    }

    withLabel: 'long' {
        cpus = {8 * task.attempt }
        memory = {32.GB * task.attempt }
        time = {40.min * task.attempt }
    }

    withLabel: 'beast' {
        cpus = {30 * task.attempt }
        memory = {128.GB * task.attempt }
        time = {30.min * task.attempt }
    }
}

